<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Bug.Vs.Android</title>
  <link rel="shortcut icon" href="img/android-icon.png" type="image/png">   
  <link rel="stylesheet" href="fontawesome/all.min.css">  
  <link rel="stylesheet" href="css/styles.css">   
</head>
<body>  
  <section id="wrapper">
    <div id="fieldWrap">
      <div id="playingField" class="fade-out">            
        <span id="activeScreen">              
          <i id="android" class="fab fa-android"></i>
        </span>         
        <span id="arrowLeft" class="fas fa-arrow-alt-circle-left"></span>
        <span id="arrowRight" class="fas fa-arrow-alt-circle-right"></span>
        <span id="boxlevel">
          <span class="level-title">level</span>
          <span id="countlevels"></span>
        </span>
        <span id="boxDeadBugs">
          <span class="fas fa-bug bugDead"></span>
          <span id="countDeadBugs"></span>
        </span>
        <button type="button" class="fad fa-play button-play-in button-active" data-game="playInGame"></button>
        <button type="button" class="fad fa-pause button-pause button-no-active" data-game="pause"></button>
        <button id="buttonSound" type="button" class="fas fa-volume-up sound-on" data-game="sound"></button>
      </div>
      <div id="menuGame" class="menu-game fade-in">
        <p class="title-game-menu">Destr<span class="far fa-debug debug-icon"></span>y all bugs on this page</p>        
        <div class="option-game">
          <span class="fas fa-gamepad-alt game-play"></span><button type="button" class="button-game" data-game="play">Play game</button>
        </div>
        <div class="option-game">
          <span class="fab fa-whmcs game-play"></span><button type="button" class="button-game" data-game="option">Option game</button>
        </div>
        <div class="option-game">
          <span class="fas fa-bug game-play"></span><button type="button" class="button-game" data-game="specification">Bugs specification</button>
        </div>
      </div>
      <div id="optionPage" class="option-page fade-out">
        <div class="option-game">
          <span class="title-option">Shot</span><span class="far fa-long-arrow-alt-right option-arrow"></span>Left-click or Ctrl 
        </div>
        <div class="option-game">
          <span class="title-option">Movement</span><span class="far fa-long-arrow-alt-right option-arrow"></span>ArrowLeft / ArrowRight
        </div>         
        <div class="option-game">
          <span class="title-option">Play / Pause</span><span class="far fa-long-arrow-alt-right option-arrow"></span>Tab
        </div>
        <div class="option-game">
          <span class="title-option">Sound on / off</span><span class="far fa-long-arrow-alt-right option-arrow"></span>Shift 
        </div>
        <div class="back-menu">
           <span class="fas fa-undo-alt arrow-back"></span>
           <button type="button" class="button-back" data-game="backMenu">Back menu</button>
        </div>
      </div>
      <div id="bugSpecification" class="option-page fade-out">
        <div class="option-game">
          <span class="fas fa-bug bug-option-green bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>One shot, one head
        </div>
        <div class="option-game">
          <span class="fas fa-spider bug-option-red bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>2shot, one head
        </div>
        <div class="option-game"> 
          <span class="fad fa-bug bug-option-green bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>All bug down faster
        </div>
        <div class="option-game"> 
          <span class="fad fa-spider bug-option-green bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>All bug down yet faster
        </div>
        <div class="option-game"> 
          <span class="fal fa-spider-black-widow bug-option-green bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>All bug up
        </div>
        <div class="option-game"> 
          <span class="fas fa-spider-black-widow bug-option-green bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>All bug up faster
        </div>
        <div class="option-game"> 
          <span class="far fa-bug bug-option-grey bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>Transform into<span class="far fa-random arrow-random-green"></span><span class="fas fa-bug bug-option-small-green"></span><span class="fas fa-spider bug-option-small-red"></span><span class="fad fa-bug bug-option-small-green"></span><span class="fad fa-spider bug-option-small-green"></span><span class="fal fa-spider-black-widow bug-option-small-green"></span>
        </div>
        <div class="option-game"> 
          <span class="fal fa-bug bug-option-red2 bug-no-active"></span><span class="far fa-long-arrow-alt-right option-arrow"></span>Transform into<span class="far fa-random arrow-random-red"></span><span class="fas fa-bug bug-option-small-red"></span><span class="fas fa-spider bug-option-small-red"></span><span class="fad fa-bug bug-option-small-red"></span><span class="fad fa-spider bug-option-small-red"></span><span class="fal fa-spider-black-widow bug-option-small-red"></span><span class="fas fa-spider-black-widow bug-option-small-red"></span>
        </div>
        <div class="back-menu">
           <span class="fas fa-undo-alt arrow-back"></span>
           <button type="button" class="button-back" data-game="backMenu2">Back menu</button>
        </div>  
      </div>
      <div id="levelTwo" class="levels fade-out"> 
          <button type="button" class="button-level" data-game="levelTwo">level Up</button>       
      </div>
      <div id="levelThree" class="levels fade-out"> 
          <button type="button" class="button-level" data-game="levelThree">level Up</button>       
      </div>
      <div id="levelFour" class="levels fade-out"> 
          <button type="button" class="button-level" data-game="levelFour">level Up</button>       
      </div>
      <div id="levelFive" class="levels fade-out"> 
          <button type="button" class="button-level" data-game="levelFive">level Up</button>       
      </div>
      <div id="gameWin" class="game-win fade-out">
        <p class="title-game-win">Debugging progress <span class="number-one">1</span><span class="far fa-debug debug-icon"></span><span class="far fa-debug debug-icon"></span><span class="fad fa-percent"></span></p> 
        <div class="option-game">You Won!</div>
        <div class="box-won">                            
          <span class="fad fa-trophy-alt trophy"></span> 
        </div>        
        <div class="back-menu">
          <span class="fas fa-undo-alt arrow-back"></span>
          <button type="button" class="button-back" data-game="winRestartGame">Back menu</button>
        </div>               
      </div>      
      <div id="GameOver" class="game-over fade-out">
        <p class="title-game-over">Don't worry, play again</p> 
        <div class="option-game">Game over</div>
        <div class="coffin-android">
          <span class="fas fa-bug bug1"></span>
          <span class="fas fa-bug bug2"></span>
          <span class="fas fa-bug bug3"></span>
          <span class="fas fa-bug bug4"></span>                   
          <span class="fab fa-android android-dead"></span> 
        </div>
        <div class="back-menu">
          <span class="fas fa-undo-alt arrow-back"></span>
          <button type="button" class="button-back" data-game="restartGame">Back menu</button>
        </div>               
      </div>      
    </div>
  </section> 

  
  <script type="text/javascript">

window.addEventListener('load', function() {
  ;(function (){

    var playingField = document.getElementById('playingField'),
        activeScreen = document.getElementById('activeScreen'),            
        menuGame = document.getElementById('menuGame'),
        optionPage = document.getElementById('optionPage'),
        bugSpecification = document.getElementById('bugSpecification'),
        countlevels = document.getElementById('countlevels'),
        GameOver = document.getElementById('GameOver'),
        gameWin = document.getElementById('gameWin'),
        buttonPlayIn = document.querySelector('.button-play-in'),
        buttonPause = document.querySelector('.button-pause'),
        buttonSound = document.getElementById('buttonSound'),
        levelTwo = document.getElementById('levelTwo'),
        levelThree = document.getElementById('levelThree'),
        levelFour = document.getElementById('levelFour'),
        levelFive = document.getElementById('levelFive'),
        countDeadBugs = document.getElementById('countDeadBugs'),      
        android = document.getElementById('android');  


    
    var stepAndroid = 10,
        goPlay = true,
        sound = false,
        counterLevel = 1,
        levelOneFlag = true,
        levelTwoFlag = true,
        levelThreeFlag = true,
        levelFourFlag = true,
        levelFiveFlag = true,       
        victoryResults = null,
        soundShot = new Audio(),
        soundBug = new Audio(),
        audioEffects = [
            'audio/bugOrdinary.mp3',
            'audio/bugArmoded.mp3',
            'audio/bugManyFaces.mp3', 
            'audio/levelUp.mp3', 
            'audio/gameOver.mp3',
            'audio/gameWin.mp3',            
            ]
        clipBullets = [];
 
 
    function createBugs() {

       for(let i = 1; i<=5; i++){      
           el = document.createElement('div');
           el.setAttribute('id', 'row' + i);        
           el.style.position = 'absolute';    
           el.style.top = 40 + (70 * (i - 1)) + 'px';
           el.style.pointerEvents = 'none';
           playingField.appendChild(el);                    
        };                                

        for(let i = 1; i<=10; i++){
           el = document.createElement('i');
           el.classList = 'fas fa-bug bugOrdinary';           
           el.style.left = 195 + (65 * i) + 'px';           
           row1.appendChild(el);          
        }; 
        for(let i = 1; i<=10; i++){
           el = document.createElement('i');
           el.classList = 'fas fa-bug bugOrdinary';           
           el.style.left = 195 + (65 * i) + 'px';         
           row2.appendChild(el);           
        }; 
        for(let i = 1; i<=10; i++){
           el = document.createElement('i');
           el.classList = 'fas fa-bug bugOrdinary';          
           el.style.left = 195 + (65 * i) + 'px';           
           row3.appendChild(el);           
        };
        for(let i = 1; i<=10; i++){
           el = document.createElement('i');
           el.classList = 'fas fa-bug bugOrdinary';           
           el.style.left = 195 + (65 * i) + 'px';          
           row4.appendChild(el);           
        };
        for(let i = 1; i<=10; i++){
           el = document.createElement('i');
           el.classList = 'fas fa-bug bugOrdinary';         
           el.style.left = 195 + (65 * i) + 'px';        
           row5.appendChild(el);
        };
        android.style.color = 'rgb(48, 209, 88)';   
                             
      }; 
 
  
   function fadeInFadeOut (fadeIn,fadeOut){
        fadeIn.classList.add('fade-in');
        fadeIn.classList.remove('fade-out');
        fadeOut.classList.add('fade-out');
        fadeOut.classList.remove('fade-in');
    };

   function buttonActive (on,off){
        on.classList.add('button-active');
        on.classList.remove('button-no-active');
        off.classList.add('button-no-active');
        off.classList.remove('button-active');
    }; 

  function playSoundShot () {
    if(!goPlay){ 
      if(!sound){ 
        soundShot.src = 'audio/shot.mp3';        
        soundShot.play();
       };  
     };          
   };

   function playSoundGame (effect) {
    if(!goPlay){ 
      if(!sound){ 
        soundBug.src = effect;        
        soundBug.play();
      };
     };   
   };
  function soundOnOff(){
    if(buttonSound.classList == 'fas fa-volume-up sound-on'){
       buttonSound.classList = 'fas fa-volume-slash sound-off';      
    }else{
       buttonSound.classList = 'fas fa-volume-up sound-on';       
    }
    if(!sound){                 
        sound = true;           
       }else{
        sound = false;             
            }; 
  }; 

      //Game Play
    document.addEventListener('click', function (event){
      let target = event.target.dataset.game;
      if(!target) return;      

      switch (target) {

        case 'play':
              fadeInFadeOut (playingField,menuGame);
              playingField.style.backgroundImage = 'url("img/bg-Field.jpg")';                             
              goPlay = false;
              levelOneFlag = false;
              createBugs();                
              GameStart();   
            break;
        case 'option':
              fadeInFadeOut (optionPage,menuGame);            
            break;
        case 'specification':
              fadeInFadeOut (bugSpecification,menuGame);
              bugSpecification.querySelectorAll('.bug-no-active').forEach( el => {
                 el.classList.remove('bug-no-active');  
                 el.classList.add('bug-active'); 
              });            
            break;     
        case 'backMenu':
              fadeInFadeOut (menuGame,optionPage);
               bugSpecification.querySelectorAll('.bug-active').forEach( el => {
                 el.classList.remove('bug-active');  
                 el.classList.add('bug-no-active'); 
              });            
            break;
        case 'backMenu2':
              fadeInFadeOut (menuGame,bugSpecification);            
            break;               
        case 'playInGame':                                         
              goPlay = false;
              buttonActive (buttonPlayIn,buttonPause);              
          break;
        case 'pause':             
              goPlay = true;
              buttonActive (buttonPause,buttonPlayIn);          
            break;
        case 'sound':             
              soundOnOff();     
            break;       
        case 'levelTwo':
              fadeInFadeOut (playingField,levelTwo);
              playingField.style.backgroundImage = 'url("img/bg-Field2.jpg")';               
              goPlay = false;             
              levelTwoFlag = false;
              createBugs();
              GameStart();
            break;
        case 'levelThree':
              fadeInFadeOut (playingField,levelThree);            
              goPlay = false;
              levelThreeFlag = false;
              createBugs();
              GameStart();
            break;
        case 'levelFour':
              fadeInFadeOut (playingField,levelFour);                        
              goPlay = false;
              levelFourFlag = false;
              createBugs();
              GameStart();
            break;
        case 'levelFive':
              fadeInFadeOut (playingField,levelFive);
              playingField.style.backgroundImage = 'url("img/bg-Field3.jpg")';           
              goPlay = false;
              levelFiveFlag = false;
              createBugs();
              GameStart();
            break; 
        case 'winRestartGame':
              counterLevel = 1;  
              levelOneFlag = true;
              levelTwoFlag = true;
              levelThreeFlag = true;
              levelFourFlag = true;
              levelFiveFlag = true;              
              fadeInFadeOut (menuGame,gameWin);                          
            break;                       
        case 'restartGame':
              counterLevel = 1; 
              levelOneFlag = true;
              levelTwoFlag = true;
              levelThreeFlag = true;
              levelFourFlag =  true;
              levelFiveFlag = true;               
              fadeInFadeOut (menuGame,GameOver);                
           break;
         
                 
      };
    });

    activeScreen.addEventListener('click', function (event){
        createBullet ();
        playSoundShot ();       
    });

     
    document.addEventListener('keydown', function(event){  
        if(!goPlay){ 

          let offsetAndroid = android.offsetLeft;

          if (event.key == 'ArrowLeft' || event.code =='KeyA'){
            android.style.left = (offsetAndroid - stepAndroid) + 'px';
            arrowRight.style.color = '';
            arrowLeft.style.color = 'rgb(48, 209, 88)';
          }
          else if (event.key == 'ArrowRight' || event.code =='KeyD'){
            android.style.left =  (offsetAndroid + stepAndroid) + 'px';
            arrowLeft.style.color = '';
            arrowRight.style.color = 'rgb(48, 209, 88)';
          }
          if(android.offsetLeft < 40){
                android.style.left =  (offsetAndroid + stepAndroid) - 10 + 'px';
                arrowLeft.style.color = 'rgb(255, 69, 58)';
          }
          if (playingField.offsetWidth < (android.offsetLeft + android.offsetWidth - 70)) {
                android.style.left = (offsetAndroid - stepAndroid) + 10 + 'px';
                arrowRight.style.color = 'rgb(255, 69, 58)';
          }        
        };  
    });

    document.addEventListener('keyup', function(event){         
        if (event.key == 'ArrowLeft'|| event.code =='KeyA'){
            arrowLeft.style.color = '';   
        }
        if (event.key == 'ArrowRight' || event.code =='KeyD'){          
            arrowRight.style.color = '';        
        } 
        if(event.code == 'ArrowDown' || event.code == 'ControlRight' || event.code == 'ControlLeft' || event.code =='KeyS'){
              createBullet ();
              playSoundShot ();                
        } 
        if(event.code == 'Tab'){
           if(!goPlay){                 
            goPlay = true;
            buttonActive (buttonPause,buttonPlayIn);
           }else{
            goPlay = false;
            buttonActive (buttonPlayIn,buttonPause);  
           } 
        } 
        if(event.code == 'ShiftRight' || event.code == 'ShiftLeft'){
           soundOnOff();
        } 
        if(event.code == 'Enter'){                 
            goPlay = false;
            buttonActive (buttonPlayIn,buttonPause);                          
        } 
    });

 

    function createBullet () {
      if(!goPlay){ 
        let bullet = document.createElement('div');      
        bullet.classList = 'bullet fad fa-meteor';          
        bullet.style.left = (android.offsetLeft  - 10) + 'px';
        playingField.append(bullet); 
        clipBullets.push({bullet: bullet, pos: bullet.offsetTop, newPos: bullet.offsetTop}); 
      }       
   };
 
function GameStart(){
       
      function RandomBugName (bug){
        let selectClass = [
          'fas fa-bug bugOrdinary',
          'fas fa-spider bugOrdinary bugArmored',       
          'fad fa-bug bugOrdinary bugRowDown',
          'fad fa-spider bugOrdinary bugRowDown2',       
          'fal fa-spider-black-widow bugOrdinary bugRowUp',
        ]; 
        let randomClass = selectClass[Math.floor(Math.random()*selectClass.length)];
        bug.classList = randomClass; 
     };

      function RandomArmoredBugName (bug){
        let selectClass = [
          'fas fa-bug bugOrdinary bugArmored',
          'fas fa-spider bugOrdinary bugArmored',       
          'fad fa-bug bugOrdinary bugRowDown bugRowDownArmored',
          'fad fa-spider bugOrdinary bugRowDown2 bugRowDownArmored',
          'fas fa-spider-black-widow bugOrdinary bugRowUp2 bugRowUpArmored',
          'fal fa-spider-black-widow bugOrdinary bugRowUp bugRowUpArmored',         
        ]; 
        let randomClass = selectClass[Math.floor(Math.random()*selectClass.length)];
        bug.classList = randomClass; 
     };

        // подсчет длинны гипотенузы по теореме Пифагора
      function _distance(a, b) {
        return Math.sqrt(
          Math.pow(Math.abs(a.left - b.left), 2) + 
          Math.pow(Math.abs(a.top  - b.top ), 2)
        );
      }

      function collision(el,bul) {
     
          el.getBoundingClientRect();
          bul.getBoundingClientRect(); 

      var radius1 = (el.offsetHeight / 2);
      var radius2 = (bul.offsetHeight / 2);
      
      // растояние между центрами обьектов
      var distance = _distance(
        _center(el), 
        _center(bul)
      );
       
       if (distance < (radius1 + radius2)) {
        
          
          let classCheck = el.className; 
  
          switch (classCheck) {
            case 'fas fa-bug bugOrdinary bugArmored':
                   playSoundGame (audioEffects[1]);          
                   el.classList.remove('bugArmored');
                   bul.remove();
                break; 
             case 'fas fa-spider bugOrdinary bugArmored':
                   playSoundGame (audioEffects[1]);         
                   el.classList.remove('bugArmored');                   
                   bul.remove();
                break;           
             case 'fal fa-spider bugOrdinary bugArmored':
                   playSoundGame (audioEffects[1]);          
                   el.classList.remove('bugArmored');
                   bul.remove();                  
                break;
             case 'fad fa-bug bugOrdinary bugRowDown bugRowDownArmored':
                   playSoundGame (audioEffects[1]);          
                   el.classList.remove('bugRowDownArmored');
                   bul.remove();                  
                break;    
             case 'fad fa-spider bugOrdinary bugRowDown2 bugRowDownArmored':
                   playSoundGame (audioEffects[1]);          
                   el.classList.remove('bugRowDownArmored');
                   bul.remove();                  
                break;
             case 'fal fa-spider-black-widow bugOrdinary bugRowUp bugRowUpArmored':
                   playSoundGame (audioEffects[1]);          
                   el.classList.remove('bugRowUpArmored');
                   bul.remove();                  
                break;     
             case 'fas fa-spider-black-widow bugOrdinary bugRowUp2 bugRowUpArmored':
                   playSoundGame (audioEffects[1]);          
                   el.classList.remove('bugRowUpArmored');
                   bul.remove();                  
                break;         
             case 'far fa-bug bugOrdinary bugManyFaces':
                   playSoundGame (audioEffects[2]);   
                   RandomBugName (el);
                   bul.remove();              
                break;
             case 'fal fa-bug bugOrdinary bugArmoredManyFaces':
                   playSoundGame (audioEffects[2]); 
                   RandomArmoredBugName (el);
                   bul.remove();                             
                break;
             case 'fad fa-bug bugOrdinary bugRowDown':
                   directionRow = directionRow + 1;
                   playSoundGame (audioEffects[0]);              
                   el.remove();
                   bul.remove();                             
                break;
              case 'fad fa-spider bugOrdinary bugRowDown2':
                   directionRow = directionRow + 2;
                   playSoundGame (audioEffects[0]);              
                   el.remove();
                   bul.remove();
                break; 
              case 'fal fa-spider-black-widow bugOrdinary bugRowUp':
                   directionRow = directionRow - 1;
                   playSoundGame (audioEffects[0]);              
                   el.remove();
                   bul.remove();
                break;  
              case 'fas fa-spider-black-widow bugOrdinary bugRowUp2':
                   directionRow = directionRow - 5;
                   playSoundGame (audioEffects[0]);              
                   el.remove();
                   bul.remove();
                break;        
                default:
                  playSoundGame (audioEffects[0]);
                  el.remove();
                  bul.remove();
                break;        

          };
      }  
      };  

      // функция которая вычисляет координаты центра блока
      function _center (el){
      var rect = el.getBoundingClientRect();
      
      // координаты относительно документа
      // (pageYOffset и pageXOffset это размер прокрутки, если она есть)
      var y = (rect.top + pageYOffset);
      var x = (rect.left + pageXOffset);

      return {
        top: y + (el.offsetHeight / 2), // y + половина высоты
        left: x + (el.offsetWidth / 2)  // x + половина ширины
        };
      }


   
      var rowOne = document.getElementById('row1'),
          rowTwo = document.getElementById('row2'),
          rowThree = document.getElementById('row3'),
          rowFour = document.getElementById('row4'),
          rowFive = document.getElementById('row5');         

      var rowOneBugs = rowOne.querySelectorAll('i'),
          rowTwoBugs = rowTwo.querySelectorAll('i'),
          rowThreeBugs = rowThree.querySelectorAll('i'),
          rowFourBugs = rowFour.querySelectorAll('i'),
          rowFiveBugs = rowFive.querySelectorAll('i');

      if(!levelOneFlag){   
          rowOneBugs[4].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowOneBugs[5].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowTwoBugs[1].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowTwoBugs[8].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowThreeBugs[4].classList = 'fad fa-bug bugOrdinary bugRowDown';
          rowThreeBugs[5].classList = 'fad fa-bug bugOrdinary bugRowDown';
          rowFourBugs[2].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[3].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[4].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[5].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[6].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[7].classList = 'fas fa-spider bugOrdinary bugArmored';    
      };
      if(!levelTwoFlag){
          rowThreeBugs.forEach((el)=>{
             el.classList = 'fas fa-spider bugOrdinary bugArmored';
          });
          rowFourBugs.forEach((el)=>{
             el.classList = 'fas fa-spider bugOrdinary bugArmored';
          });
          rowTwoBugs[1].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowTwoBugs[4].classList = 'fad fa-spider bugOrdinary bugRowDown2';
          rowTwoBugs[5].classList = 'fad fa-spider bugOrdinary bugRowDown2';
          rowTwoBugs[8].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowFiveBugs[2].classList = 'fad fa-bug bugOrdinary bugRowDown';
          rowFiveBugs[4].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[5].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[6].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[9].classList = 'fad fa-bug bugOrdinary bugRowDown'; 
      };
      if(!levelThreeFlag){        
          rowOneBugs[0].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowOneBugs[1].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowOneBugs[8].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowOneBugs[9].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowTwoBugs[0].classList = 'fal fa-spider-black-widow bugOrdinary bugRowUp';
          rowTwoBugs[9].classList = 'fad fa-spider bugOrdinary bugRowDown2';
          rowTwoBugs[2].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowTwoBugs[3].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowTwoBugs[6].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowTwoBugs[7].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowThreeBugs[4].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowThreeBugs[5].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[9].classList = 'fas fa-spider-black-widow bugOrdinary bugRowUp2';
          rowFourBugs[0].classList = 'fad fa-spider bugOrdinary bugRowDown2';
          rowFourBugs[1].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowFourBugs[8].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowFourBugs[2].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[3].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[4].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowFourBugs[5].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowFourBugs[6].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFourBugs[7].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[8].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[9].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[0].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[1].classList = 'fas fa-spider bugOrdinary bugArmored';
          rowFiveBugs[3].classList = 'fad fa-bug bugOrdinary bugRowDown';
          rowFiveBugs[4].classList = 'fad fa-bug bugOrdinary bugRowDown';
          rowFiveBugs[5].classList = 'fad fa-bug bugOrdinary bugRowDown';
          rowFiveBugs[6].classList = 'fad fa-bug bugOrdinary bugRowDown';     
      };
      if(!levelFourFlag){
          rowOneBugs[0].classList = 'fas fa-spider-black-widow bugOrdinary bugRowUp2';
          rowOneBugs[9].classList = 'fal fa-spider-black-widow bugOrdinary bugRowUp';
          rowTwoBugs.forEach((el)=>{
             el.classList = 'fas fa-spider bugOrdinary bugArmored';
          });
          rowThreeBugs.forEach((el)=>{
             el.classList = 'fal fa-bug bugOrdinary bugArmoredManyFaces';
          });
          rowFourBugs.forEach((el)=>{
             el.classList = 'fas fa-spider bugOrdinary bugArmored';
          });
          rowFiveBugs[0].classList = 'fad fa-spider bugOrdinary bugRowDown2';
          rowFiveBugs[1].classList = 'fas fa-spider-black-widow bugOrdinary bugRowUp2';
          rowFiveBugs[2].classList = 'fad fa-spider bugOrdinary bugRowDown2';
          rowFiveBugs[3].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowFiveBugs[4].classList = 'fal fa-spider-black-widow bugOrdinary bugRowUp';
          rowFiveBugs[5].classList = 'fal fa-spider-black-widow bugOrdinary bugRowUp';
          rowFiveBugs[6].classList = 'far fa-bug bugOrdinary bugManyFaces';
          rowFiveBugs[7].classList = 'fad fa-spider bugOrdinary bugRowDown2';
          rowFiveBugs[8].classList = 'fas fa-spider-black-widow bugOrdinary bugRowUp2';
          rowFiveBugs[9].classList = 'fad fa-spider bugOrdinary bugRowDown2'; 
      } 
      if(!levelFiveFlag){
          rowTwoBugs.forEach((el)=>{
             el.classList = 'far fa-bug bugOrdinary bugManyFaces';
          });
          rowThreeBugs.forEach((el)=>{
             el.classList = 'far fa-bug bugOrdinary bugManyFaces';
          });
          rowThreeBugs[2].classList = 'fal fa-spider-black-widow bugOrdinary bugRowUp'; 
          rowThreeBugs[7].classList = 'fas fa-spider-black-widow bugOrdinary bugRowUp2';
          rowFourBugs.forEach((el)=>{
             el.classList = 'far fa-bug bugOrdinary bugManyFaces';
          });
          rowFourBugs[1].classList = 'fas fa-spider-black-widow bugOrdinary bugRowUp2'; 
          rowFourBugs[8].classList = 'fal fa-spider-black-widow bugOrdinary bugRowUp';
          rowFiveBugs.forEach((el)=>{
             el.classList = 'fal fa-bug bugOrdinary bugArmoredManyFaces';
          });
          rowFiveBugs[0].classList = 'fal fa-spider-black-widow bugOrdinary bugRowUp'; 
          rowFiveBugs[9].classList = 'fas fa-spider-black-widow bugOrdinary bugRowUp2'; 
      } 
   
      var step = 10;
     
      var offsetSpeedOne = 2,
          offsetSpeedTwo = 2,
          offsetSpeedThree = 2,
          offsetSpeedFour = 2,
          offsetSpeedFive = 2;
   

      if(!levelTwoFlag){ 
          offsetSpeedOne = 2;        
          offsetSpeedTwo = 2.4;
          offsetSpeedThree = 2.3;
          offsetSpeedFour = 2.8;
      }
      if(!levelThreeFlag){ 
          offsetSpeedOne = 3.1;        
          offsetSpeedTwo = 3.2;
          offsetSpeedThree = 3.3;
          offsetSpeedFour = 3.4;
          offsetSpeedFive = 3.5;
      }
      if(!levelFourFlag){
        offsetSpeedOne = 4.1;        
        offsetSpeedTwo = 4;
        offsetSpeedThree = 3;
        offsetSpeedFour = 4;
        offsetSpeedFive = 4;
      }
      if(!levelFiveFlag){
        offsetSpeedOne = 5;        
        offsetSpeedTwo = 5;
        offsetSpeedThree = 5;
        offsetSpeedFour = 5;
        offsetSpeedFive = 5;
      }
         

      var offsetXBug0 = rowOneBugs[0].offsetLeft,
          offsetXBug1 = rowOneBugs[1].offsetLeft,
          offsetXBug2 = rowOneBugs[2].offsetLeft,
          offsetXBug3 = rowOneBugs[3].offsetLeft,
          offsetXBug4 = rowOneBugs[4].offsetLeft,
          offsetXBug5 = rowOneBugs[5].offsetLeft,
          offsetXBug6 = rowOneBugs[6].offsetLeft,
          offsetXBug7 = rowOneBugs[7].offsetLeft,
          offsetXBug8 = rowOneBugs[8].offsetLeft,
          offsetXBug9 = rowOneBugs[9].offsetLeft;
          

      var offsetXBug10 = rowTwoBugs[0].offsetLeft,
          offsetXBug11 = rowTwoBugs[1].offsetLeft,
          offsetXBug12 = rowTwoBugs[2].offsetLeft,
          offsetXBug13 = rowTwoBugs[3].offsetLeft,
          offsetXBug14 = rowTwoBugs[4].offsetLeft,
          offsetXBug15 = rowTwoBugs[5].offsetLeft,
          offsetXBug16 = rowTwoBugs[6].offsetLeft,
          offsetXBug17 = rowTwoBugs[7].offsetLeft,
          offsetXBug18 = rowTwoBugs[8].offsetLeft,
          offsetXBug19 = rowTwoBugs[9].offsetLeft;

      var offsetXBug20 = rowThreeBugs[0].offsetLeft,
          offsetXBug21 = rowThreeBugs[1].offsetLeft,
          offsetXBug22 = rowThreeBugs[2].offsetLeft,
          offsetXBug23 = rowThreeBugs[3].offsetLeft,
          offsetXBug24 = rowThreeBugs[4].offsetLeft,
          offsetXBug25 = rowThreeBugs[5].offsetLeft,
          offsetXBug26 = rowThreeBugs[6].offsetLeft,
          offsetXBug27 = rowThreeBugs[7].offsetLeft,
          offsetXBug28 = rowThreeBugs[8].offsetLeft,
          offsetXBug29 = rowThreeBugs[9].offsetLeft;

      var offsetXBug30 = rowFourBugs[0].offsetLeft,
          offsetXBug31 = rowFourBugs[1].offsetLeft,
          offsetXBug32 = rowFourBugs[2].offsetLeft,
          offsetXBug33 = rowFourBugs[3].offsetLeft,
          offsetXBug34 = rowFourBugs[4].offsetLeft,
          offsetXBug35 = rowFourBugs[5].offsetLeft,
          offsetXBug36 = rowFourBugs[6].offsetLeft,
          offsetXBug37 = rowFourBugs[7].offsetLeft,
          offsetXBug38 = rowFourBugs[8].offsetLeft,
          offsetXBug39 = rowFourBugs[9].offsetLeft;

      var offsetXBug40 = rowFiveBugs[0].offsetLeft,
          offsetXBug41 = rowFiveBugs[1].offsetLeft,
          offsetXBug42 = rowFiveBugs[2].offsetLeft,
          offsetXBug43 = rowFiveBugs[3].offsetLeft,
          offsetXBug44 = rowFiveBugs[4].offsetLeft,
          offsetXBug45 = rowFiveBugs[5].offsetLeft,
          offsetXBug46 = rowFiveBugs[6].offsetLeft,
          offsetXBug47 = rowFiveBugs[7].offsetLeft,
          offsetXBug48 = rowFiveBugs[8].offsetLeft,
          offsetXBug49 = rowFiveBugs[9].offsetLeft;            
      
      var offsetYrowOne = rowOne.offsetTop;
          offsetYrowTwo = rowTwo.offsetTop;
          offsetYrowThree = rowThree.offsetTop;
          offsetYrowFour = rowFour.offsetTop;
          offsetYrowFive = rowFive.offsetTop;      
      
      var direction1 = 1,
          direction2 = 1,
          direction3 = 1,
          direction4 = 1,
          direction5 = -1,
          directionRow = 1; 

  var update = (step) => {      
      
      if(!goPlay){ 

        clipBullets.forEach((o)=>{
          o.bullet.style.bottom = (o.pos - (o.newPos -= 15)) + 'px';                 
      
       if(o.newPos < 0){
          o.bullet.remove();            
          clipBullets.shift(o);
       }

       if(o.bullet.getBoundingClientRect().top < activeScreen.getBoundingClientRect().top){
          o.bullet.remove();
       }       
        
        playingField.querySelectorAll('i').forEach( el => {          
            collision(el,o.bullet);     
        });
      });
        playingField.querySelectorAll('i').forEach( (el,i) => {            
          victoryResults = i;                   
            if(el.getBoundingClientRect().top >= (android.getBoundingClientRect().bottom - 90)){
                android.style.color = 'rgb(28, 28, 30)';
                playSoundGame (audioEffects[4]);   
                goPlay = true;                            
              playingField.querySelectorAll('div').forEach( (el) => {
                  el.remove(); 
                });
              playingField.querySelectorAll('.bugOrdinary').forEach( (el) => { 
                  el.remove();
              });
              fadeInFadeOut (GameOver,playingField);                           
            }   
        });

          countlevels.innerHTML = counterLevel;
          countDeadBugs.innerHTML = victoryResults;
        
          if(victoryResults == 0){             
               counterLevel++
              if(counterLevel == 2){
                playSoundGame (audioEffects[3]);              
                playingField.querySelectorAll('div').forEach( (el) => {
                  el.remove(); 
                });
                 fadeInFadeOut(levelTwo,playingField);                 
                 goPlay = true;
                 levelOneFlag = true;             
              };
              if(counterLevel == 3){
                playSoundGame (audioEffects[3]);   
                playingField.querySelectorAll('div').forEach( (el) => {
                  el.remove(); 
                });
                 fadeInFadeOut(levelThree,playingField);                 
                 goPlay = true;
                 levelTwoFlag = true;                                                
              };
              if(counterLevel == 4){
                playSoundGame (audioEffects[3]);   
                playingField.querySelectorAll('div').forEach( (el) => {
                  el.remove(); 
                });
                 fadeInFadeOut(levelFour,playingField);                 
                 goPlay = true;               
                 levelThreeFlag = true;                                                  
              };
              if(counterLevel == 5){
                playSoundGame (audioEffects[3]);   
                playingField.querySelectorAll('div').forEach( (el) => {
                  el.remove(); 
                });
                 fadeInFadeOut(levelFive,playingField);                 
                 goPlay = true;                
                 levelFourFlag = true;                                                   
              };
              if(counterLevel == 6){
                playSoundGame (audioEffects[5]);   
                playingField.querySelectorAll('div').forEach( (el) => {
                  el.remove(); 
                });
                 fadeInFadeOut(gameWin,playingField);                 
                 goPlay = true;              
              };          
            };
      

      offsetXBug0 += offsetSpeedOne * direction1;
      offsetXBug1 += offsetSpeedOne * direction1;
      offsetXBug2 += offsetSpeedOne * direction1;
      offsetXBug3 += offsetSpeedOne * direction1;
      offsetXBug4 += offsetSpeedOne * direction1;
      offsetXBug5 += offsetSpeedOne * direction1;
      offsetXBug6 += offsetSpeedOne * direction1;
      offsetXBug7 += offsetSpeedOne * direction1;
      offsetXBug8 += offsetSpeedOne * direction1;
      offsetXBug9 += offsetSpeedOne * direction1;
      
      offsetXBug10 -= offsetSpeedTwo * direction2;
      offsetXBug11 -= offsetSpeedTwo * direction2;
      offsetXBug12 -= offsetSpeedTwo * direction2;
      offsetXBug13 -= offsetSpeedTwo * direction2;
      offsetXBug14 -= offsetSpeedTwo * direction2;
      offsetXBug15 -= offsetSpeedTwo * direction2;
      offsetXBug16 -= offsetSpeedTwo * direction2;
      offsetXBug17 -= offsetSpeedTwo * direction2;
      offsetXBug18 -= offsetSpeedTwo * direction2;
      offsetXBug19 -= offsetSpeedTwo * direction2;

      offsetXBug20 += offsetSpeedThree * direction3;
      offsetXBug21 += offsetSpeedThree * direction3;
      offsetXBug22 += offsetSpeedThree * direction3;
      offsetXBug23 += offsetSpeedThree * direction3;
      offsetXBug24 += offsetSpeedThree * direction3;
      offsetXBug25 += offsetSpeedThree * direction3;
      offsetXBug26 += offsetSpeedThree * direction3;
      offsetXBug27 += offsetSpeedThree * direction3;
      offsetXBug28 += offsetSpeedThree * direction3;
      offsetXBug29 += offsetSpeedThree * direction3;

      offsetXBug30 -= offsetSpeedFour * direction4;
      offsetXBug31 -= offsetSpeedFour * direction4;
      offsetXBug32 -= offsetSpeedFour * direction4;
      offsetXBug33 -= offsetSpeedFour * direction4;
      offsetXBug34 -= offsetSpeedFour * direction4;
      offsetXBug35 -= offsetSpeedFour * direction4;
      offsetXBug36 -= offsetSpeedFour * direction4;
      offsetXBug37 -= offsetSpeedFour * direction4;
      offsetXBug38 -= offsetSpeedFour * direction4;
      offsetXBug39 -= offsetSpeedFour * direction4;

      offsetXBug40 -= offsetSpeedFive * direction5;
      offsetXBug41 -= offsetSpeedFive * direction5;
      offsetXBug42 -= offsetSpeedFive * direction5;
      offsetXBug43 -= offsetSpeedFive * direction5;
      offsetXBug44 -= offsetSpeedFive * direction5;
      offsetXBug45 -= offsetSpeedFive * direction5;
      offsetXBug46 -= offsetSpeedFive * direction5;
      offsetXBug47 -= offsetSpeedFive * direction5;
      offsetXBug48 -= offsetSpeedFive * direction5;
      offsetXBug49 -= offsetSpeedFive * direction5;

      offsetYrowOne += .1 * directionRow;
      offsetYrowTwo += .1 * directionRow;
      offsetYrowThree += .1 * directionRow;
      offsetYrowFour += .1 * directionRow;
      offsetYrowFive += .1 * directionRow;

    
      if(offsetYrowOne < 40){
        directionRow = 1;        
      }

    //rowOneBugs
      rowOneBugs.forEach( (el) => {
            if (playingField.offsetWidth <= (el.offsetLeft + el.offsetWidth)){
                 direction1 = -1;                
            } 
            if(el.offsetLeft <-1){
                 direction1 = 1;                
            }         
        });
    //rowTwoBugs
      rowTwoBugs.forEach( (el) => {
            if(el.offsetLeft <-1){
                 direction2 = -1;
            } 
            if(playingField.offsetWidth <= (el.offsetLeft + el.offsetWidth)){
                 direction2 = 1;
            }        
        });
      //rowThreeBugs
        rowThreeBugs.forEach( (el) => {
            if (playingField.offsetWidth <= (el.offsetLeft + el.offsetWidth)){
                 direction3 = -1;                
            } 
            if(el.offsetLeft <-1){
                 direction3 = 1;                
            }         
        });
      //rowFourBugs
      rowFourBugs.forEach( (el) => {
            if(el.offsetLeft <-1){
                 direction4 = -1;
            } 
            if(playingField.offsetWidth <= (el.offsetLeft + el.offsetWidth)){
                 direction4 = 1;
            }        
        });
      //rowFiveBugs
        rowFiveBugs.forEach( (el) => {
            if (playingField.offsetWidth <= (el.offsetLeft + el.offsetWidth)) {
                 direction5 = 1;                
            } 
            if(el.offsetLeft <-1){             
                 direction5 = -1;                
            }         
        });  
      };   
    };
     
    var render = () => {
      
        rowOneBugs[0].style.left = offsetXBug0 + 'px';
        rowOneBugs[1].style.left = offsetXBug1 + 'px';
        rowOneBugs[2].style.left = offsetXBug2 + 'px';
        rowOneBugs[3].style.left = offsetXBug3 + 'px';
        rowOneBugs[4].style.left = offsetXBug4 + 'px';
        rowOneBugs[5].style.left = offsetXBug5 + 'px';
        rowOneBugs[6].style.left = offsetXBug6 + 'px';
        rowOneBugs[7].style.left = offsetXBug7 + 'px';
        rowOneBugs[8].style.left = offsetXBug8 + 'px';
        rowOneBugs[9].style.left = offsetXBug9 + 'px';

        rowTwoBugs[0].style.left = offsetXBug10 + 'px';
        rowTwoBugs[1].style.left = offsetXBug11 + 'px';
        rowTwoBugs[2].style.left = offsetXBug12 + 'px';
        rowTwoBugs[3].style.left = offsetXBug13 + 'px';
        rowTwoBugs[4].style.left = offsetXBug14 + 'px';
        rowTwoBugs[5].style.left = offsetXBug15 + 'px';
        rowTwoBugs[6].style.left = offsetXBug16 + 'px';
        rowTwoBugs[7].style.left = offsetXBug17 + 'px';
        rowTwoBugs[8].style.left = offsetXBug18 + 'px';
        rowTwoBugs[9].style.left = offsetXBug19 + 'px';

        rowThreeBugs[0].style.left = offsetXBug20 + 'px';
        rowThreeBugs[1].style.left = offsetXBug21 + 'px';
        rowThreeBugs[2].style.left = offsetXBug22 + 'px';
        rowThreeBugs[3].style.left = offsetXBug23 + 'px';
        rowThreeBugs[4].style.left = offsetXBug24 + 'px';
        rowThreeBugs[5].style.left = offsetXBug25 + 'px';
        rowThreeBugs[6].style.left = offsetXBug26 + 'px';
        rowThreeBugs[7].style.left = offsetXBug27 + 'px';
        rowThreeBugs[8].style.left = offsetXBug28 + 'px';
        rowThreeBugs[9].style.left = offsetXBug29 + 'px';

        rowFourBugs[0].style.left = offsetXBug30 + 'px';
        rowFourBugs[1].style.left = offsetXBug31 + 'px';
        rowFourBugs[2].style.left = offsetXBug32 + 'px';
        rowFourBugs[3].style.left = offsetXBug33 + 'px';
        rowFourBugs[4].style.left = offsetXBug34 + 'px';
        rowFourBugs[5].style.left = offsetXBug35 + 'px';
        rowFourBugs[6].style.left = offsetXBug36 + 'px';
        rowFourBugs[7].style.left = offsetXBug37 + 'px';
        rowFourBugs[8].style.left = offsetXBug38 + 'px';
        rowFourBugs[9].style.left = offsetXBug39 + 'px';

        rowFiveBugs[0].style.left = offsetXBug40 + 'px';
        rowFiveBugs[1].style.left = offsetXBug41 + 'px';
        rowFiveBugs[2].style.left = offsetXBug42 + 'px';
        rowFiveBugs[3].style.left = offsetXBug43 + 'px';
        rowFiveBugs[4].style.left = offsetXBug44 + 'px';
        rowFiveBugs[5].style.left = offsetXBug45 + 'px';
        rowFiveBugs[6].style.left = offsetXBug46 + 'px';
        rowFiveBugs[7].style.left = offsetXBug47 + 'px';
        rowFiveBugs[8].style.left = offsetXBug48 + 'px';
        rowFiveBugs[9].style.left = offsetXBug49 + 'px';

        rowOne.style.top = offsetYrowOne + 'px';
        rowTwo.style.top = offsetYrowTwo + 'px';
        rowThree.style.top = offsetYrowThree + 'px';
        rowFour.style.top = offsetYrowFour + 'px';
        rowFive.style.top = offsetYrowFive + 'px';
       
    };

   // переопределить requestAnimationFrame, чтобы эмулировать различное количество FPS (одинаково во всех примерах игрового цикла)
    window.requestAnimationFrame = (func) => {
      clearTimeout(window.rafTimer);
      window.rafTimer = setTimeout(func, 1000 / (window.maxFPS || 60));
    };

    // game loop
    var last = performance.now(),
        step = 1 / 60, // обновление должно вызываться 60 раз в секунду
        dt = 0,
        now;

    var frame = () => {
      now = performance.now();
      dt += (now - last) / 1000;
      while(dt > step) {
        dt = dt - step;
        update(step);
      }
      last = now;

      render();
      requestAnimationFrame(frame); 
    }
      
      requestAnimationFrame(frame); 
    };
     
  }());
});
  
            
      
  </script>


</body>
</html>