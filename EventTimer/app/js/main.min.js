window.addEventListener("load",()=>{let e=(new Date).getFullYear(),t=document.getElementById("EventForm"),a=document.getElementById("eventName"),n=document.getElementById("eventYear"),l=document.getElementById("eventMonth"),i=document.getElementById("eventDate"),s=document.getElementById("EventContainer"),d=JSON.parse(localStorage.getItem("events"))||[],o=d.length;t.addEventListener("click",e=>{let t=e.target;t.matches('[data-action="in-input"]')&&(a.value=t.innerHTML,a.classList.remove("is-invalid"))});for(let t=0;t<=10;t++){let a=new Option(e+t,e+t);n.appendChild(a)}function r(e){let t=i.querySelectorAll("option");for(let e=1;e<t.length;e++)t[e].remove();for(let t=1;t<=e;t++){let e=new Option(t,t);i.appendChild(e)}}function u(e){r(Number.isInteger(e/4)?29:28)}function v(e){let t=new Date(`${e.month} ${e.date}, ${e.year}`),a=`(${e.date} ${e.monthText} ${e.year+" года"})`,n=document.createElement("div");n.dataset.id=e.id,n.classList.add("event-block"),new CountdownToEvent(t,n,e.nameEvt,a).out(),s.prepend(n)}n.onchange=()=>{""!==n.value&&("February"===l.value&&u(n.value),l[0].selected=!0,i[0].selected=!0,l.disabled=!1)},l.onchange=()=>{if(""===l.value)return!1;"January"===l.value||"March"===l.value||"May"===l.value||"July"===l.value||"August"===l.value||"October"===l.value||"December"===l.value?r(31):r(30),"February"===l.value&&u(n.value),i[0].selected=!0,i.disabled=!1},a.onfocus=function(){this.classList.remove("is-invalid")},n.onfocus=function(){this.classList.remove("is-invalid")},l.onfocus=function(){this.classList.remove("is-invalid")},i.onfocus=function(){this.classList.remove("is-invalid")},d.forEach(e=>{v(e)}),t.addEventListener("submit",e=>{if(e.preventDefault(),""===a.value&&a.classList.add("is-invalid"),""===n.value&&!1===n.disabled&&n.classList.add("is-invalid"),""===l.value&&!1===l.disabled&&l.classList.add("is-invalid"),""===i.value&&!1===i.disabled&&i.classList.add("is-invalid"),""!==a.value&&""!==n.value&&""!==l.value&&""!==i.value){let e=Array.from(l).find(e=>!0===e.selected),s="ь"==e.innerText.substr(-1)||"й"==e.innerText.substr(-1)?e.innerText.slice(0,-1)+"я":e.innerText+"a";console.log(s);let r={id:o++,nameEvt:a.value,year:n.value,month:l.value,date:i.value,monthText:s.toLowerCase()};d.push(r),localStorage.setItem("events",JSON.stringify(d)),v(r),t.reset(),l.disabled=!0,i.disabled=!0}}),s.addEventListener("click",e=>{let t=e.target;if(t.matches('[data-click="remove"]')){let e=t.closest("[data-id]");for(let t in d)if(d[t].id==e.dataset.id){d.splice(t,1),localStorage.setItem("events",JSON.stringify(d));break}e.remove()}})});
//# sourceMappingURL=main.min.js.map
