{"version":3,"sources":["main.min.js"],"names":["window","addEventListener","year","Date","getFullYear","eventForm","document","getElementById","eventName","selectYear","selectMonth","selectDate","eventContainer","storageEvents","JSON","parse","localStorage","getItem","lastId","length","event","btn","target","matches","value","innerHTML","classList","remove","i","option","Option","appendChild","optionDate","num","options","querySelectorAll","leapYear","Number","isInteger","timerEvent","template","eventDate","month","date","dateText","monthText","element","createElement","dataset","id","add","CountdownToEvent","nameEvt","out","prepend","onchange","selected","disabled","onfocus","this","forEach","preventDefault","optSelctd","Array","from","find","opt","optText","innerText","substr","slice","console","log","toLowerCase","push","setItem","stringify","reset","el","parent","closest","splice"],"mappings":"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","file":"main.min.js","sourcesContent":["window.addEventListener('load', ()=> {\r\n\r\n\tlet year = new Date().getFullYear();\r\n\r\n\tlet eventForm = document.getElementById('EventForm'),\r\n\t\teventName = document.getElementById('eventName'),\r\n\t\tselectYear = document.getElementById('eventYear'),\r\n\t\tselectMonth = document.getElementById('eventMonth'),\r\n\t\tselectDate = document.getElementById('eventDate');\r\n\r\n\tlet\teventContainer = document.getElementById('EventContainer');\r\n\r\n    let storageEvents = JSON.parse(localStorage.getItem('events')) || [],\r\n        lastId = storageEvents.length; \t\t\t\r\n\r\n\t\t\t\r\n\r\n  \teventForm.addEventListener('click', event => {\r\n\r\n  \t\tlet btn = event.target;\r\n\r\n  \t\tif (btn.matches('[data-action=\"in-input\"]')) {\r\n\r\n  \t\t\teventName.value = btn.innerHTML;\r\n            eventName.classList.remove('is-invalid');\r\n  \t\t}\r\n\r\n  \t});\r\n\r\n    for (let i = 0; i <= 10; i++) {\r\n\r\n    \tlet option = new Option(year + i, year + i);\r\n    \t\tselectYear.appendChild(option);\r\n    }\r\n\r\n    function optionDate (num) {\r\n\r\n    \tlet options = selectDate.querySelectorAll('option'),\r\n    \t    option = null;\r\n\r\n    \tfor (let i = 1; i < options.length; i++) {\r\n\r\n    \t\toptions[i].remove();\r\n    \t\t\r\n    \t}\r\n\r\n    \tfor (let i = 1; i <= num; i++) {\t        \t\t\t\r\n        \r\n        \tlet option = new Option(i, i);                \t\r\n        \t\tselectDate.appendChild(option);\r\n    \t\r\n    \t}\t\r\n    }\r\n\r\n    function isInteger(num) {\r\n\r\n\t\t\treturn (num ^ 0) === num;  \t\t\t\t\r\n\t}\r\n\r\n\tfunction leapYear (year) {\r\n\r\n\t\tlet leap = Number.isInteger(year / 4);\r\n\r\n\t\tif (!leap) {\r\n\r\n\t\t\toptionDate (28)\r\n\r\n\t\t} else { optionDate (29) }\r\n\t}\r\n\r\n//onChange\r\n    selectYear.onchange = () => {\r\n\r\n    \tif (selectYear.value !== '') {\r\n            \r\n           if (selectMonth.value === 'February') {\r\n\r\n           \t  leapYear (selectYear.value)\r\n           }\r\n\r\n           selectMonth[0].selected = true;\r\n           selectDate[0].selected = true;\r\n    \t   selectMonth.disabled = false;\r\n    \t}\r\n\r\n    }\r\n\r\n    selectMonth.onchange = () => {\r\n\r\n    \tif (selectMonth.value === '') return false;\t        \t\r\n\r\n    \tif (selectMonth.value === 'January' || selectMonth.value === 'March' \r\n    \t\t|| selectMonth.value === 'May' || selectMonth.value === 'July'\r\n    \t\t|| selectMonth.value === 'August' || selectMonth.value === 'October'\r\n    \t\t|| selectMonth.value === 'December') {\r\n\r\n    \t\toptionDate(31)\t\r\n    \t\t\r\n    \t} else { optionDate(30)\t}\r\n\r\n    \tif (selectMonth.value === 'February') {\r\n\r\n    \t\tleapYear(selectYear.value)\r\n\r\n    \t} \r\n\r\n    \tselectDate[0].selected = true;\r\n    \tselectDate.disabled = false;\r\n    }\r\n\r\n//onFocus\r\n    eventName.onfocus = function ()  {\r\n    \r\n    \tthis.classList.remove('is-invalid');\r\n    }\r\n\r\n    selectYear.onfocus = function ()  {\r\n    \r\n    \tthis.classList.remove('is-invalid');\r\n    }\r\n\r\n    selectMonth.onfocus = function ()  {\r\n    \r\n    \tthis.classList.remove('is-invalid');\r\n    }\r\n\r\n    selectDate.onfocus = function ()  {\r\n    \r\n    \tthis.classList.remove('is-invalid');\r\n    }\r\n\r\n//TimerEvent\r\n\tfunction timerEvent (template) {\r\n\r\n\t\tlet eventDate = new Date(`${template.month} ${template.date}, ${template.year}`),\r\n            dateText = `(${template.date} ${template.monthText} ${template.year + ' года'})`;\r\n\t\tlet element = document.createElement('div');\r\n            element.dataset.id = template.id;\r\n\t\t\telement.classList.add('event-block');\r\n\r\n\t\tlet timerEvent = new CountdownToEvent(eventDate, element, template.nameEvt, dateText);\r\n\r\n\t\ttimerEvent.out()\r\n\r\n\t\teventContainer.prepend(element);\t\t\t\r\n\t}\r\n\r\n    storageEvents.forEach( eventDate =>{\r\n\r\n        timerEvent (eventDate);\r\n    });\r\n\r\n\r\n    eventForm.addEventListener('submit', event => {\r\n\r\n    \tevent.preventDefault();\r\n\r\n    \tif (eventName.value === '') { \r\n\r\n    \t\teventName.classList.add('is-invalid');\t        \t\t\r\n    \t}\r\n\r\n    \tif (selectYear.value === '' && selectYear.disabled === false) { \t        \t\t\r\n\r\n    \t\tselectYear.classList.add('is-invalid');\t        \t\t\t        \t\t\r\n    \t}\r\n\r\n    \tif (selectMonth.value === '' && selectMonth.disabled === false) { \t        \t\t\r\n\r\n    \t\tselectMonth.classList.add('is-invalid');\t        \t\t        \t\t\t\r\n    \t}\r\n\r\n    \tif (selectDate.value === '' && selectDate.disabled === false) { \t        \t\t\r\n\r\n    \t\tselectDate.classList.add('is-invalid');\t        \t\t\t        \t\t        \t\t\r\n    \t\r\n    \t} \r\n\r\n    \tif (eventName.value !== '' && selectYear.value !== '' &&\r\n    \t\tselectMonth.value !== '' && selectDate.value !== '') {\r\n\r\n            let optSelctd = Array.from(selectMonth).find( opt => opt.selected === true),\r\n                optText = (optSelctd.innerText.substr(-1) == 'ь' || optSelctd.innerText.substr(-1) == 'й') \r\n                        ? optSelctd.innerText.slice(0, -1) + 'я' : optSelctd.innerText + 'a';\r\n\r\n                console.log(optText)\r\n\r\n    \t\tlet template = {\r\n\r\n                id: lastId++,\r\n    \t\t\tnameEvt: eventName.value,\r\n    \t\t\tyear: selectYear.value,\r\n    \t\t\tmonth: selectMonth.value,                \r\n    \t\t\tdate: selectDate.value,\r\n                monthText: optText.toLowerCase()\r\n    \t\t};\r\n            \r\n            storageEvents.push(template);\r\n            localStorage.setItem('events', JSON.stringify(storageEvents));\r\n\r\n    \t\ttimerEvent (template);\r\n\r\n    \t\teventForm.reset();\r\n    \t\tselectMonth.disabled = true;\r\n    \t\tselectDate.disabled = true;    \t\t\r\n    \t}\r\n\r\n    });\r\n\r\n    eventContainer.addEventListener('click', event => {\r\n\r\n        let el = event.target;\r\n\r\n        if (el.matches('[data-click=\"remove\"]')) {\r\n\r\n            let parent = el.closest('[data-id]');\r\n\r\n            for (let i in storageEvents) {\r\n\r\n                if (storageEvents[i].id == parent.dataset.id) {\r\n\r\n                    storageEvents.splice(i, 1);\r\n                    localStorage.setItem('events', JSON.stringify(storageEvents));\r\n                    break;\r\n                }\r\n            }\r\n\r\n            parent.remove();\r\n        }\r\n    });\r\n    \r\n});"]}